/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
allprojects {
    version = '0.1'
}

subprojects {
}

task prepareIso(type: Copy) {
    from('bootloader/boot')
    from('kernel/build/exe/kernel/kernel') {
        rename 'kernel', 'bubackos.elf'
    }
    into "$project.buildDir/bootloader/boot"
}

task iso(type:Exec, dependsOn: prepareIso) {
    description 'Build the kernel image'
    inputs.files "$project.buildDir/bootloader/boot"
    outputs.files "$project.buildDir/bubackos.iso"

    commandLine "grub-mkrescue", "-o", "build/bubackos.iso", "$project.buildDir/bootloader"

}
